{"ast":null,"code":"var _jsxFileName = \"/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js\";\nimport { Component } from 'react';\nimport { RiArrowDropLeftLine, RiArrowDropRightLine } from 'react-icons/ri';\nimport Loader from 'react-loader-spinner';\nimport Header from '../Header';\nimport MovieCard from '../MovieCard';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass PopularRestaurants extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      restaurantsList: [],\n      isLoading: false,\n      activePage: 1,\n      totalPages: 0\n    };\n    this.getRestaurants = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        activePage,\n        sortOption\n      } = this.state;\n      const jwtToken = c45a857c193f6302f2b5061c3b85e743;\n      const limit = 9;\n      const offset = (activePage - 1) * limit;\n      const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`;\n      const options = {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`\n        },\n        method: 'GET'\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n      console.log(data);\n      const totalRestaurants = data.total;\n      const totalPages = Math.ceil(totalRestaurants / limit);\n      const updatedData = data.restaurants.map(eachItem => ({\n        id: eachItem.id,\n        cuisine: eachItem.cuisine,\n        imageUrl: eachItem.image_url,\n        name: eachItem.name,\n        rating: eachItem.user_rating.rating,\n        totalReviews: eachItem.user_rating.total_reviews\n      }));\n      console.log(updatedData);\n      this.setState({\n        restaurantsList: updatedData,\n        isLoading: false,\n        totalPages\n      });\n    };\n    this.decrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage > 1) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage - 1\n        }), this.getRestaurants);\n      }\n    };\n    this.incrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage < 4) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage + 1\n        }), this.getRestaurants);\n      }\n    };\n    this.renderPopularRestaurants = () => {\n      const {\n        restaurantsList,\n        sortOption,\n        activePage,\n        totalPages\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"restaurants-list\",\n          children: restaurantsList.map(eachItem => /*#__PURE__*/_jsxDEV(MovieCard, {\n            restaurant: eachItem\n          }, eachItem.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.decrementPage,\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropLeftLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-count\",\n            children: activePage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"page-count\",\n            style: {\n              marginLeft: '5px',\n              marginRight: '5px'\n            },\n            children: \"of\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-count\",\n            children: [\" \", totalPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.incrementPage,\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropRightLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true);\n    };\n    this.renderLoader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-loader\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#F7931E\",\n        height: 50,\n        width: 50\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this);\n  }\n  componentDidMount() {\n    this.getRestaurants();\n  }\n  render() {\n    const {\n      isLoading\n    } = this.state;\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants();\n  }\n}\nexport default PopularRestaurants;","map":{"version":3,"names":["Component","RiArrowDropLeftLine","RiArrowDropRightLine","Loader","Header","MovieCard","jsxDEV","_jsxDEV","Fragment","_Fragment","PopularRestaurants","constructor","args","state","restaurantsList","isLoading","activePage","totalPages","getRestaurants","setState","sortOption","jwtToken","c45a857c193f6302f2b5061c3b85e743","limit","offset","url","options","headers","Authorization","method","response","fetch","data","json","console","log","totalRestaurants","total","Math","ceil","updatedData","restaurants","map","eachItem","id","cuisine","imageUrl","image_url","name","rating","user_rating","totalReviews","total_reviews","decrementPage","prevState","incrementPage","renderPopularRestaurants","children","className","restaurant","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","size","style","marginLeft","marginRight","renderLoader","color","height","width","componentDidMount","render"],"sources":["/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js"],"sourcesContent":["import {Component} from 'react'\n\nimport {RiArrowDropLeftLine, RiArrowDropRightLine} from 'react-icons/ri'\n\nimport Loader from 'react-loader-spinner'\n\nimport Header from '../Header'\nimport MovieCard from '../MovieCard'\n\nimport './index.css'\n\nclass PopularRestaurants extends Component {\n  state = {\n    restaurantsList: [],\n    isLoading: false,\n    activePage: 1,\n\n    totalPages: 0,\n  }\n\n  componentDidMount() {\n    this.getRestaurants()\n  }\n\n  getRestaurants = async () => {\n    this.setState({isLoading: true})\n    const {activePage, sortOption} = this.state\n    const jwtToken = c45a857c193f6302f2b5061c3b85e743\n    const limit = 9\n    const offset = (activePage - 1) * limit\n    const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`\n    const options = {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n      },\n      method: 'GET',\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    console.log(data)\n    const totalRestaurants = data.total\n    const totalPages = Math.ceil(totalRestaurants / limit)\n    const updatedData = data.restaurants.map(eachItem => ({\n      id: eachItem.id,\n      cuisine: eachItem.cuisine,\n      imageUrl: eachItem.image_url,\n      name: eachItem.name,\n      rating: eachItem.user_rating.rating,\n      totalReviews: eachItem.user_rating.total_reviews,\n    }))\n    console.log(updatedData)\n    this.setState({\n      restaurantsList: updatedData,\n      isLoading: false,\n      totalPages,\n    })\n  }\n\n  decrementPage = () => {\n    const {activePage} = this.state\n    if (activePage > 1) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage - 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  incrementPage = () => {\n    const {activePage} = this.state\n    if (activePage < 4) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage + 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  renderPopularRestaurants = () => {\n    const {restaurantsList, sortOption, activePage, totalPages} = this.state\n    return (\n      <>\n        <ul className=\"restaurants-list\">\n          {restaurantsList.map(eachItem => (\n            <MovieCard restaurant={eachItem} key={eachItem.id} />\n          ))}\n        </ul>\n        <div className=\"pagination-container\">\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.decrementPage}\n          >\n            <RiArrowDropLeftLine size={20} />\n          </button>\n          <p className=\"page-count\">{activePage}</p>\n          <span\n            className=\"page-count\"\n            style={{marginLeft: '5px', marginRight: '5px'}}\n          >\n            of\n          </span>\n          <p className=\"page-count\"> {totalPages}</p>\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.incrementPage}\n          >\n            <RiArrowDropRightLine size={20} />\n          </button>\n        </div>\n      </>\n    )\n  }\n\n  renderLoader = () => (\n    <div className=\"carousel-loader\">\n      <Loader type=\"ThreeDots\" color=\"#F7931E\" height={50} width={50} />\n    </div>\n  )\n\n  render() {\n    const {isLoading} = this.state\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants()\n  }\n}\n\nexport default PopularRestaurants\n"],"mappings":";AAAA,SAAQA,SAAS,QAAO,OAAO;AAE/B,SAAQC,mBAAmB,EAAEC,oBAAoB,QAAO,gBAAgB;AAExE,OAAOC,MAAM,MAAM,sBAAsB;AAEzC,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,SAAS,MAAM,cAAc;AAEpC,OAAO,aAAa;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpB,MAAMC,kBAAkB,SAASV,SAAS,CAAC;EAAAW,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KACzCC,KAAK,GAAG;MACNC,eAAe,EAAE,EAAE;MACnBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,CAAC;MAEbC,UAAU,EAAE;IACd,CAAC;IAAA,KAMDC,cAAc,GAAG,YAAY;MAC3B,IAAI,CAACC,QAAQ,CAAC;QAACJ,SAAS,EAAE;MAAI,CAAC,CAAC;MAChC,MAAM;QAACC,UAAU;QAAEI;MAAU,CAAC,GAAG,IAAI,CAACP,KAAK;MAC3C,MAAMQ,QAAQ,GAAGC,gCAAgC;MACjD,MAAMC,KAAK,GAAG,CAAC;MACf,MAAMC,MAAM,GAAG,CAACR,UAAU,GAAG,CAAC,IAAIO,KAAK;MACvC,MAAME,GAAG,GAAI,gDAA+CD,MAAO,UAASD,KAAM,mBAAkBH,UAAW,EAAC;MAChH,MAAMM,OAAO,GAAG;QACdC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASP,QAAS;QACpC,CAAC;QACDQ,MAAM,EAAE;MACV,CAAC;MACD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACN,GAAG,EAAEC,OAAO,CAAC;MAC1C,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;MACjB,MAAMI,gBAAgB,GAAGJ,IAAI,CAACK,KAAK;MACnC,MAAMpB,UAAU,GAAGqB,IAAI,CAACC,IAAI,CAACH,gBAAgB,GAAGb,KAAK,CAAC;MACtD,MAAMiB,WAAW,GAAGR,IAAI,CAACS,WAAW,CAACC,GAAG,CAACC,QAAQ,KAAK;QACpDC,EAAE,EAAED,QAAQ,CAACC,EAAE;QACfC,OAAO,EAAEF,QAAQ,CAACE,OAAO;QACzBC,QAAQ,EAAEH,QAAQ,CAACI,SAAS;QAC5BC,IAAI,EAAEL,QAAQ,CAACK,IAAI;QACnBC,MAAM,EAAEN,QAAQ,CAACO,WAAW,CAACD,MAAM;QACnCE,YAAY,EAAER,QAAQ,CAACO,WAAW,CAACE;MACrC,CAAC,CAAC,CAAC;MACHlB,OAAO,CAACC,GAAG,CAACK,WAAW,CAAC;MACxB,IAAI,CAACrB,QAAQ,CAAC;QACZL,eAAe,EAAE0B,WAAW;QAC5BzB,SAAS,EAAE,KAAK;QAChBE;MACF,CAAC,CAAC;IACJ,CAAC;IAAA,KAEDoC,aAAa,GAAG,MAAM;MACpB,MAAM;QAACrC;MAAU,CAAC,GAAG,IAAI,CAACH,KAAK;MAC/B,IAAIG,UAAU,GAAG,CAAC,EAAE;QAClB,IAAI,CAACG,QAAQ,CACXmC,SAAS,KAAK;UACZtC,UAAU,EAAEsC,SAAS,CAACtC,UAAU,GAAG;QACrC,CAAC,CAAC,EACF,IAAI,CAACE,cAAc,CACpB;MACH;IACF,CAAC;IAAA,KAEDqC,aAAa,GAAG,MAAM;MACpB,MAAM;QAACvC;MAAU,CAAC,GAAG,IAAI,CAACH,KAAK;MAC/B,IAAIG,UAAU,GAAG,CAAC,EAAE;QAClB,IAAI,CAACG,QAAQ,CACXmC,SAAS,KAAK;UACZtC,UAAU,EAAEsC,SAAS,CAACtC,UAAU,GAAG;QACrC,CAAC,CAAC,EACF,IAAI,CAACE,cAAc,CACpB;MACH;IACF,CAAC;IAAA,KAEDsC,wBAAwB,GAAG,MAAM;MAC/B,MAAM;QAAC1C,eAAe;QAAEM,UAAU;QAAEJ,UAAU;QAAEC;MAAU,CAAC,GAAG,IAAI,CAACJ,KAAK;MACxE,oBACEN,OAAA,CAAAE,SAAA;QAAAgD,QAAA,gBACElD,OAAA;UAAImD,SAAS,EAAC,kBAAkB;UAAAD,QAAA,EAC7B3C,eAAe,CAAC4B,GAAG,CAACC,QAAQ,iBAC3BpC,OAAA,CAACF,SAAS;YAACsD,UAAU,EAAEhB;UAAS,GAAMA,QAAQ,CAACC,EAAE;YAAAgB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAClD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACC,eACLxD,OAAA;UAAKmD,SAAS,EAAC,sBAAsB;UAAAD,QAAA,gBACnClD,OAAA;YACEyD,IAAI,EAAC,QAAQ;YACbN,SAAS,EAAC,mBAAmB;YAC7BO,OAAO,EAAE,IAAI,CAACZ,aAAc;YAAAI,QAAA,eAE5BlD,OAAA,CAACN,mBAAmB;cAACiE,IAAI,EAAE;YAAG;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAC1B,eACTxD,OAAA;YAAGmD,SAAS,EAAC,YAAY;YAAAD,QAAA,EAAEzC;UAAU;YAAA4C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAK,eAC1CxD,OAAA;YACEmD,SAAS,EAAC,YAAY;YACtBS,KAAK,EAAE;cAACC,UAAU,EAAE,KAAK;cAAEC,WAAW,EAAE;YAAK,CAAE;YAAAZ,QAAA,EAChD;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAO,eACPxD,OAAA;YAAGmD,SAAS,EAAC,YAAY;YAAAD,QAAA,GAAC,GAAC,EAACxC,UAAU;UAAA;YAAA2C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAK,eAC3CxD,OAAA;YACEyD,IAAI,EAAC,QAAQ;YACbN,SAAS,EAAC,mBAAmB;YAC7BO,OAAO,EAAE,IAAI,CAACV,aAAc;YAAAE,QAAA,eAE5BlD,OAAA,CAACL,oBAAoB;cAACgE,IAAI,EAAE;YAAG;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAC3B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACL;MAAA,gBACL;IAEP,CAAC;IAAA,KAEDO,YAAY,GAAG,mBACb/D,OAAA;MAAKmD,SAAS,EAAC,iBAAiB;MAAAD,QAAA,eAC9BlD,OAAA,CAACJ,MAAM;QAAC6D,IAAI,EAAC,WAAW;QAACO,KAAK,EAAC,SAAS;QAACC,MAAM,EAAE,EAAG;QAACC,KAAK,EAAE;MAAG;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAErE;EAAA;EAvGDW,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACxD,cAAc,EAAE;EACvB;EAuGAyD,MAAMA,CAAA,EAAG;IACP,MAAM;MAAC5D;IAAS,CAAC,GAAG,IAAI,CAACF,KAAK;IAC9B,OAAOE,SAAS,GAAG,IAAI,CAACuD,YAAY,EAAE,GAAG,IAAI,CAACd,wBAAwB,EAAE;EAC1E;AACF;AAEA,eAAe9C,kBAAkB"},"metadata":{},"sourceType":"module"}