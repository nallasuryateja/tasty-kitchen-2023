{"ast":null,"code":"var _jsxFileName = \"/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js\";\nimport { Component } from 'react';\nimport { RiArrowDropLeftLine, RiArrowDropRightLine } from 'react-icons/ri';\nimport Cookies from 'js-cookie';\nimport Loader from 'react-loader-spinner';\nimport RestaurantsHeader from '../RestaurantsHeader';\nimport RestaurantCard from '../RestaurantCard';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst sortByOptions = [{\n  id: 0,\n  displayText: 'Highest',\n  value: 'Highest'\n}, {\n  id: 2,\n  displayText: 'Lowest',\n  value: 'Lowest'\n}];\nclass PopularRestaurants extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      restaurantsList: [],\n      isLoading: false,\n      activePage: 1,\n      sortOption: sortByOptions[1].value,\n      totalPages: 0\n    };\n    this.getRestaurants = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        activePage,\n        sortOption\n      } = this.state;\n      const jwtToken = Cookies.get('jwt_token');\n      const limit = 9;\n      const offset = (activePage - 1) * limit;\n      const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`;\n      const options = {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`\n        },\n        method: 'GET'\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n      console.log(data);\n      const totalRestaurants = data.total;\n      const totalPages = Math.ceil(totalRestaurants / limit);\n      const updatedData = data.restaurants.map(eachItem => ({\n        id: eachItem.id,\n        cuisine: eachItem.cuisine,\n        imageUrl: eachItem.image_url,\n        name: eachItem.name,\n        rating: eachItem.user_rating.rating,\n        totalReviews: eachItem.user_rating.total_reviews\n      }));\n      console.log(updatedData);\n      this.setState({\n        restaurantsList: updatedData,\n        isLoading: false,\n        totalPages\n      });\n    };\n    this.updateOption = option => {\n      this.setState({\n        sortOption: option\n      }, this.getRestaurants);\n    };\n    this.decrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage > 1) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage - 1\n        }), this.getRestaurants);\n      }\n    };\n    this.incrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage < 4) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage + 1\n        }), this.getRestaurants);\n      }\n    };\n    this.renderPopularRestaurants = () => {\n      const {\n        restaurantsList,\n        sortOption,\n        activePage,\n        totalPages\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(RestaurantsHeader, {\n          sortOption: sortOption,\n          sortByOptions: sortByOptions,\n          updateOption: this.updateOption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"hr-line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"restaurants-list\",\n          children: restaurantsList.map(eachItem => /*#__PURE__*/_jsxDEV(RestaurantCard, {\n            restaurant: eachItem\n          }, eachItem.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.decrementPage,\n            testid: \"pagination-left-button\",\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropLeftLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            testid: \"active-page-number\",\n            className: \"page-count\",\n            children: activePage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"page-count\",\n            style: {\n              marginLeft: '5px',\n              marginRight: '5px'\n            },\n            children: \"of\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-count\",\n            children: [\" \", totalPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.incrementPage,\n            testid: \"pagination-right-button\",\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropRightLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true);\n    };\n    this.renderLoader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      testid: \"restaurants-list-loader\",\n      className: \"carousel-loader\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#F7931E\",\n        height: 50,\n        width: 50\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }, this);\n  }\n  componentDidMount() {\n    this.getRestaurants();\n  }\n  render() {\n    const {\n      isLoading\n    } = this.state;\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants();\n  }\n}\nexport default PopularRestaurants;","map":{"version":3,"names":["Component","RiArrowDropLeftLine","RiArrowDropRightLine","Cookies","Loader","RestaurantsHeader","RestaurantCard","jsxDEV","_jsxDEV","Fragment","_Fragment","sortByOptions","id","displayText","value","PopularRestaurants","constructor","args","state","restaurantsList","isLoading","activePage","sortOption","totalPages","getRestaurants","setState","jwtToken","get","limit","offset","url","options","headers","Authorization","method","response","fetch","data","json","console","log","totalRestaurants","total","Math","ceil","updatedData","restaurants","map","eachItem","cuisine","imageUrl","image_url","name","rating","user_rating","totalReviews","total_reviews","updateOption","option","decrementPage","prevState","incrementPage","renderPopularRestaurants","children","fileName","_jsxFileName","lineNumber","columnNumber","className","restaurant","type","onClick","testid","size","style","marginLeft","marginRight","renderLoader","color","height","width","componentDidMount","render"],"sources":["/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js"],"sourcesContent":["import {Component} from 'react'\n\nimport {RiArrowDropLeftLine, RiArrowDropRightLine} from 'react-icons/ri'\n\nimport Cookies from 'js-cookie'\nimport Loader from 'react-loader-spinner'\n\nimport RestaurantsHeader from '../RestaurantsHeader'\nimport RestaurantCard from '../RestaurantCard'\n\nimport './index.css'\n\nconst sortByOptions = [\n  {\n    id: 0,\n    displayText: 'Highest',\n    value: 'Highest',\n  },\n  {\n    id: 2,\n    displayText: 'Lowest',\n    value: 'Lowest',\n  },\n]\n\nclass PopularRestaurants extends Component {\n  state = {\n    restaurantsList: [],\n    isLoading: false,\n    activePage: 1,\n    sortOption: sortByOptions[1].value,\n    totalPages: 0,\n  }\n\n  componentDidMount() {\n    this.getRestaurants()\n  }\n\n  getRestaurants = async () => {\n    this.setState({isLoading: true})\n    const {activePage, sortOption} = this.state\n    const jwtToken = Cookies.get('jwt_token')\n    const limit = 9\n    const offset = (activePage - 1) * limit\n    const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`\n    const options = {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n      },\n      method: 'GET',\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    console.log(data)\n    const totalRestaurants = data.total\n    const totalPages = Math.ceil(totalRestaurants / limit)\n    const updatedData = data.restaurants.map(eachItem => ({\n      id: eachItem.id,\n      cuisine: eachItem.cuisine,\n      imageUrl: eachItem.image_url,\n      name: eachItem.name,\n      rating: eachItem.user_rating.rating,\n      totalReviews: eachItem.user_rating.total_reviews,\n    }))\n    console.log(updatedData)\n    this.setState({\n      restaurantsList: updatedData,\n      isLoading: false,\n      totalPages,\n    })\n  }\n\n  updateOption = option => {\n    this.setState({sortOption: option}, this.getRestaurants)\n  }\n\n  decrementPage = () => {\n    const {activePage} = this.state\n    if (activePage > 1) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage - 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  incrementPage = () => {\n    const {activePage} = this.state\n    if (activePage < 4) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage + 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  renderPopularRestaurants = () => {\n    const {restaurantsList, sortOption, activePage, totalPages} = this.state\n    return (\n      <>\n        <RestaurantsHeader\n          sortOption={sortOption}\n          sortByOptions={sortByOptions}\n          updateOption={this.updateOption}\n        />\n        <hr className=\"hr-line\" />\n        <ul className=\"restaurants-list\">\n          {restaurantsList.map(eachItem => (\n            <RestaurantCard restaurant={eachItem} key={eachItem.id} />\n          ))}\n        </ul>\n        <div className=\"pagination-container\">\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.decrementPage}\n            testid=\"pagination-left-button\"\n          >\n            <RiArrowDropLeftLine size={20} />\n          </button>\n          <p testid=\"active-page-number\" className=\"page-count\">\n            {activePage}\n          </p>\n          <span\n            className=\"page-count\"\n            style={{marginLeft: '5px', marginRight: '5px'}}\n          >\n            of\n          </span>\n          <p className=\"page-count\"> {totalPages}</p>\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.incrementPage}\n            testid=\"pagination-right-button\"\n          >\n            <RiArrowDropRightLine size={20} />\n          </button>\n        </div>\n      </>\n    )\n  }\n\n  renderLoader = () => (\n    <div testid=\"restaurants-list-loader\" className=\"carousel-loader\">\n      <Loader type=\"ThreeDots\" color=\"#F7931E\" height={50} width={50} />\n    </div>\n  )\n\n  render() {\n    const {isLoading} = this.state\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants()\n  }\n}\n\nexport default PopularRestaurants\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}