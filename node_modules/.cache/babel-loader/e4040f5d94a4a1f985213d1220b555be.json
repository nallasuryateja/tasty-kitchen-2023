{"ast":null,"code":"var _jsxFileName = \"/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js\";\nimport { Component } from 'react';\nimport { RiArrowDropLeftLine, RiArrowDropRightLine } from 'react-icons/ri';\nimport Loader from 'react-loader-spinner';\nimport Header from '../Header';\nimport RestaurantCard from '../RestaurantCard';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst sortByOptions = [{\n  id: 0,\n  displayText: 'Highest',\n  value: 'Highest'\n}, {\n  id: 2,\n  displayText: 'Lowest',\n  value: 'Lowest'\n}];\nclass PopularRestaurants extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      restaurantsList: [],\n      isLoading: false,\n      activePage: 1,\n      sortOption: sortByOptions[1].value,\n      totalPages: 0\n    };\n    this.getRestaurants = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        activePage,\n        sortOption\n      } = this.state;\n      const jwtToken = Cookies.get('jwt_token');\n      const limit = 9;\n      const offset = (activePage - 1) * limit;\n      const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`;\n      const options = {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`\n        },\n        method: 'GET'\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n      console.log(data);\n      const totalRestaurants = data.total;\n      const totalPages = Math.ceil(totalRestaurants / limit);\n      const updatedData = data.restaurants.map(eachItem => ({\n        id: eachItem.id,\n        cuisine: eachItem.cuisine,\n        imageUrl: eachItem.image_url,\n        name: eachItem.name,\n        rating: eachItem.user_rating.rating,\n        totalReviews: eachItem.user_rating.total_reviews\n      }));\n      console.log(updatedData);\n      this.setState({\n        restaurantsList: updatedData,\n        isLoading: false,\n        totalPages\n      });\n    };\n    this.updateOption = option => {\n      this.setState({\n        sortOption: option\n      }, this.getRestaurants);\n    };\n    this.decrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage > 1) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage - 1\n        }), this.getRestaurants);\n      }\n    };\n    this.incrementPage = () => {\n      const {\n        activePage\n      } = this.state;\n      if (activePage < 4) {\n        this.setState(prevState => ({\n          activePage: prevState.activePage + 1\n        }), this.getRestaurants);\n      }\n    };\n    this.renderPopularRestaurants = () => {\n      const {\n        restaurantsList,\n        sortOption,\n        activePage,\n        totalPages\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(RestaurantsHeader, {\n          sortOption: sortOption,\n          sortByOptions: sortByOptions,\n          updateOption: this.updateOption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"hr-line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"restaurants-list\",\n          children: restaurantsList.map(eachItem => /*#__PURE__*/_jsxDEV(RestaurantCard, {\n            restaurant: eachItem\n          }, eachItem.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.decrementPage,\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropLeftLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-count\",\n            children: activePage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"page-count\",\n            style: {\n              marginLeft: '5px',\n              marginRight: '5px'\n            },\n            children: \"of\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-count\",\n            children: [\" \", totalPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"pagination-button\",\n            onClick: this.incrementPage,\n            children: /*#__PURE__*/_jsxDEV(RiArrowDropRightLine, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true);\n    };\n    this.renderLoader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-loader\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#F7931E\",\n        height: 50,\n        width: 50\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }, this);\n  }\n  componentDidMount() {\n    this.getRestaurants();\n  }\n  render() {\n    const {\n      isLoading\n    } = this.state;\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants();\n  }\n}\nexport default PopularRestaurants;","map":{"version":3,"names":["Component","RiArrowDropLeftLine","RiArrowDropRightLine","Loader","Header","RestaurantCard","jsxDEV","_jsxDEV","Fragment","_Fragment","sortByOptions","id","displayText","value","PopularRestaurants","constructor","args","state","restaurantsList","isLoading","activePage","sortOption","totalPages","getRestaurants","setState","jwtToken","Cookies","get","limit","offset","url","options","headers","Authorization","method","response","fetch","data","json","console","log","totalRestaurants","total","Math","ceil","updatedData","restaurants","map","eachItem","cuisine","imageUrl","image_url","name","rating","user_rating","totalReviews","total_reviews","updateOption","option","decrementPage","prevState","incrementPage","renderPopularRestaurants","children","RestaurantsHeader","fileName","_jsxFileName","lineNumber","columnNumber","className","restaurant","type","onClick","size","style","marginLeft","marginRight","renderLoader","color","height","width","componentDidMount","render"],"sources":["/home/workspace/sample-project/nimap/src/components/PopularMovies/index.js"],"sourcesContent":["import {Component} from 'react'\n\nimport {RiArrowDropLeftLine, RiArrowDropRightLine} from 'react-icons/ri'\n\nimport Loader from 'react-loader-spinner'\n\nimport Header from '../Header'\nimport RestaurantCard from '../RestaurantCard'\n\nimport './index.css'\n\nconst sortByOptions = [\n  {\n    id: 0,\n    displayText: 'Highest',\n    value: 'Highest',\n  },\n  {\n    id: 2,\n    displayText: 'Lowest',\n    value: 'Lowest',\n  },\n]\n\nclass PopularRestaurants extends Component {\n  state = {\n    restaurantsList: [],\n    isLoading: false,\n    activePage: 1,\n    sortOption: sortByOptions[1].value,\n    totalPages: 0,\n  }\n\n  componentDidMount() {\n    this.getRestaurants()\n  }\n\n  getRestaurants = async () => {\n    this.setState({isLoading: true})\n    const {activePage, sortOption} = this.state\n    const jwtToken = Cookies.get('jwt_token')\n    const limit = 9\n    const offset = (activePage - 1) * limit\n    const url = `https://apis.ccbp.in/restaurants-list?offset=${offset}&limit=${limit}&sort_by_rating=${sortOption}`\n    const options = {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n      },\n      method: 'GET',\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    console.log(data)\n    const totalRestaurants = data.total\n    const totalPages = Math.ceil(totalRestaurants / limit)\n    const updatedData = data.restaurants.map(eachItem => ({\n      id: eachItem.id,\n      cuisine: eachItem.cuisine,\n      imageUrl: eachItem.image_url,\n      name: eachItem.name,\n      rating: eachItem.user_rating.rating,\n      totalReviews: eachItem.user_rating.total_reviews,\n    }))\n    console.log(updatedData)\n    this.setState({\n      restaurantsList: updatedData,\n      isLoading: false,\n      totalPages,\n    })\n  }\n\n  updateOption = option => {\n    this.setState({sortOption: option}, this.getRestaurants)\n  }\n\n  decrementPage = () => {\n    const {activePage} = this.state\n    if (activePage > 1) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage - 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  incrementPage = () => {\n    const {activePage} = this.state\n    if (activePage < 4) {\n      this.setState(\n        prevState => ({\n          activePage: prevState.activePage + 1,\n        }),\n        this.getRestaurants,\n      )\n    }\n  }\n\n  renderPopularRestaurants = () => {\n    const {restaurantsList, sortOption, activePage, totalPages} = this.state\n    return (\n      <>\n        <RestaurantsHeader\n          sortOption={sortOption}\n          sortByOptions={sortByOptions}\n          updateOption={this.updateOption}\n        />\n        <hr className=\"hr-line\" />\n        <ul className=\"restaurants-list\">\n          {restaurantsList.map(eachItem => (\n            <RestaurantCard restaurant={eachItem} key={eachItem.id} />\n          ))}\n        </ul>\n        <div className=\"pagination-container\">\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.decrementPage}\n          >\n            <RiArrowDropLeftLine size={20} />\n          </button>\n          <p className=\"page-count\">{activePage}</p>\n          <span\n            className=\"page-count\"\n            style={{marginLeft: '5px', marginRight: '5px'}}\n          >\n            of\n          </span>\n          <p className=\"page-count\"> {totalPages}</p>\n          <button\n            type=\"button\"\n            className=\"pagination-button\"\n            onClick={this.incrementPage}\n          >\n            <RiArrowDropRightLine size={20} />\n          </button>\n        </div>\n      </>\n    )\n  }\n\n  renderLoader = () => (\n    <div className=\"carousel-loader\">\n      <Loader type=\"ThreeDots\" color=\"#F7931E\" height={50} width={50} />\n    </div>\n  )\n\n  render() {\n    const {isLoading} = this.state\n    return isLoading ? this.renderLoader() : this.renderPopularRestaurants()\n  }\n}\n\nexport default PopularRestaurants\n"],"mappings":";AAAA,SAAQA,SAAS,QAAO,OAAO;AAE/B,SAAQC,mBAAmB,EAAEC,oBAAoB,QAAO,gBAAgB;AAExE,OAAOC,MAAM,MAAM,sBAAsB;AAEzC,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,cAAc,MAAM,mBAAmB;AAE9C,OAAO,aAAa;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpB,MAAMC,aAAa,GAAG,CACpB;EACEC,EAAE,EAAE,CAAC;EACLC,WAAW,EAAE,SAAS;EACtBC,KAAK,EAAE;AACT,CAAC,EACD;EACEF,EAAE,EAAE,CAAC;EACLC,WAAW,EAAE,QAAQ;EACrBC,KAAK,EAAE;AACT,CAAC,CACF;AAED,MAAMC,kBAAkB,SAASd,SAAS,CAAC;EAAAe,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KACzCC,KAAK,GAAG;MACNC,eAAe,EAAE,EAAE;MACnBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE,CAAC;MACbC,UAAU,EAAEX,aAAa,CAAC,CAAC,CAAC,CAACG,KAAK;MAClCS,UAAU,EAAE;IACd,CAAC;IAAA,KAMDC,cAAc,GAAG,YAAY;MAC3B,IAAI,CAACC,QAAQ,CAAC;QAACL,SAAS,EAAE;MAAI,CAAC,CAAC;MAChC,MAAM;QAACC,UAAU;QAAEC;MAAU,CAAC,GAAG,IAAI,CAACJ,KAAK;MAC3C,MAAMQ,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MACzC,MAAMC,KAAK,GAAG,CAAC;MACf,MAAMC,MAAM,GAAG,CAACT,UAAU,GAAG,CAAC,IAAIQ,KAAK;MACvC,MAAME,GAAG,GAAI,gDAA+CD,MAAO,UAASD,KAAM,mBAAkBP,UAAW,EAAC;MAChH,MAAMU,OAAO,GAAG;QACdC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASR,QAAS;QACpC,CAAC;QACDS,MAAM,EAAE;MACV,CAAC;MACD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACN,GAAG,EAAEC,OAAO,CAAC;MAC1C,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;MACjB,MAAMI,gBAAgB,GAAGJ,IAAI,CAACK,KAAK;MACnC,MAAMpB,UAAU,GAAGqB,IAAI,CAACC,IAAI,CAACH,gBAAgB,GAAGb,KAAK,CAAC;MACtD,MAAMiB,WAAW,GAAGR,IAAI,CAACS,WAAW,CAACC,GAAG,CAACC,QAAQ,KAAK;QACpDrC,EAAE,EAAEqC,QAAQ,CAACrC,EAAE;QACfsC,OAAO,EAAED,QAAQ,CAACC,OAAO;QACzBC,QAAQ,EAAEF,QAAQ,CAACG,SAAS;QAC5BC,IAAI,EAAEJ,QAAQ,CAACI,IAAI;QACnBC,MAAM,EAAEL,QAAQ,CAACM,WAAW,CAACD,MAAM;QACnCE,YAAY,EAAEP,QAAQ,CAACM,WAAW,CAACE;MACrC,CAAC,CAAC,CAAC;MACHjB,OAAO,CAACC,GAAG,CAACK,WAAW,CAAC;MACxB,IAAI,CAACrB,QAAQ,CAAC;QACZN,eAAe,EAAE2B,WAAW;QAC5B1B,SAAS,EAAE,KAAK;QAChBG;MACF,CAAC,CAAC;IACJ,CAAC;IAAA,KAEDmC,YAAY,GAAGC,MAAM,IAAI;MACvB,IAAI,CAAClC,QAAQ,CAAC;QAACH,UAAU,EAAEqC;MAAM,CAAC,EAAE,IAAI,CAACnC,cAAc,CAAC;IAC1D,CAAC;IAAA,KAEDoC,aAAa,GAAG,MAAM;MACpB,MAAM;QAACvC;MAAU,CAAC,GAAG,IAAI,CAACH,KAAK;MAC/B,IAAIG,UAAU,GAAG,CAAC,EAAE;QAClB,IAAI,CAACI,QAAQ,CACXoC,SAAS,KAAK;UACZxC,UAAU,EAAEwC,SAAS,CAACxC,UAAU,GAAG;QACrC,CAAC,CAAC,EACF,IAAI,CAACG,cAAc,CACpB;MACH;IACF,CAAC;IAAA,KAEDsC,aAAa,GAAG,MAAM;MACpB,MAAM;QAACzC;MAAU,CAAC,GAAG,IAAI,CAACH,KAAK;MAC/B,IAAIG,UAAU,GAAG,CAAC,EAAE;QAClB,IAAI,CAACI,QAAQ,CACXoC,SAAS,KAAK;UACZxC,UAAU,EAAEwC,SAAS,CAACxC,UAAU,GAAG;QACrC,CAAC,CAAC,EACF,IAAI,CAACG,cAAc,CACpB;MACH;IACF,CAAC;IAAA,KAEDuC,wBAAwB,GAAG,MAAM;MAC/B,MAAM;QAAC5C,eAAe;QAAEG,UAAU;QAAED,UAAU;QAAEE;MAAU,CAAC,GAAG,IAAI,CAACL,KAAK;MACxE,oBACEV,OAAA,CAAAE,SAAA;QAAAsD,QAAA,gBACExD,OAAA,CAACyD,iBAAiB;UAChB3C,UAAU,EAAEA,UAAW;UACvBX,aAAa,EAAEA,aAAc;UAC7B+C,YAAY,EAAE,IAAI,CAACA;QAAa;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAChC,eACF7D,OAAA;UAAI8D,SAAS,EAAC;QAAS;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAG,eAC1B7D,OAAA;UAAI8D,SAAS,EAAC,kBAAkB;UAAAN,QAAA,EAC7B7C,eAAe,CAAC6B,GAAG,CAACC,QAAQ,iBAC3BzC,OAAA,CAACF,cAAc;YAACiE,UAAU,EAAEtB;UAAS,GAAMA,QAAQ,CAACrC,EAAE;YAAAsD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QACvD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACC,eACL7D,OAAA;UAAK8D,SAAS,EAAC,sBAAsB;UAAAN,QAAA,gBACnCxD,OAAA;YACEgE,IAAI,EAAC,QAAQ;YACbF,SAAS,EAAC,mBAAmB;YAC7BG,OAAO,EAAE,IAAI,CAACb,aAAc;YAAAI,QAAA,eAE5BxD,OAAA,CAACN,mBAAmB;cAACwE,IAAI,EAAE;YAAG;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAC1B,eACT7D,OAAA;YAAG8D,SAAS,EAAC,YAAY;YAAAN,QAAA,EAAE3C;UAAU;YAAA6C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAK,eAC1C7D,OAAA;YACE8D,SAAS,EAAC,YAAY;YACtBK,KAAK,EAAE;cAACC,UAAU,EAAE,KAAK;cAAEC,WAAW,EAAE;YAAK,CAAE;YAAAb,QAAA,EAChD;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAO,eACP7D,OAAA;YAAG8D,SAAS,EAAC,YAAY;YAAAN,QAAA,GAAC,GAAC,EAACzC,UAAU;UAAA;YAAA2C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAK,eAC3C7D,OAAA;YACEgE,IAAI,EAAC,QAAQ;YACbF,SAAS,EAAC,mBAAmB;YAC7BG,OAAO,EAAE,IAAI,CAACX,aAAc;YAAAE,QAAA,eAE5BxD,OAAA,CAACL,oBAAoB;cAACuE,IAAI,EAAE;YAAG;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAC3B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACL;MAAA,gBACL;IAEP,CAAC;IAAA,KAEDS,YAAY,GAAG,mBACbtE,OAAA;MAAK8D,SAAS,EAAC,iBAAiB;MAAAN,QAAA,eAC9BxD,OAAA,CAACJ,MAAM;QAACoE,IAAI,EAAC,WAAW;QAACO,KAAK,EAAC,SAAS;QAACC,MAAM,EAAE,EAAG;QAACC,KAAK,EAAE;MAAG;QAAAf,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAErE;EAAA;EAjHDa,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAAC1D,cAAc,EAAE;EACvB;EAiHA2D,MAAMA,CAAA,EAAG;IACP,MAAM;MAAC/D;IAAS,CAAC,GAAG,IAAI,CAACF,KAAK;IAC9B,OAAOE,SAAS,GAAG,IAAI,CAAC0D,YAAY,EAAE,GAAG,IAAI,CAACf,wBAAwB,EAAE;EAC1E;AACF;AAEA,eAAehD,kBAAkB"},"metadata":{},"sourceType":"module"}